import{E as C,h as R,r as _,i as W,l as X,c as n,o as l,a as e,b as E,s as S,t as o,d as I,j as Z,v as L,F as q,D as O,w as J,B as ee,G as oe,x as re}from"./app-CQqk7krA.js";const G={async getByPersona(c){return(await C.get(`/persone/${c}/eventi`)).data},async create(c,a){return(await C.post(`/persone/${c}/eventi`,a)).data},async update(c,a,y){return(await C.put(`/persone/${c}/eventi/${a}`,y)).data},async delete(c,a){return(await C.delete(`/persone/${c}/eventi/${a}`)).data}},Q={async getByPersona(c){return(await C.get(`/persone/${c}/media`)).data},async upload(c,a,y,t=""){if(!a)throw new Error("File non specificato");const w=new FormData;return w.append("file",a),w.append("tipo",y),t&&w.append("descrizione",t),(await C.post(`/persone/${c}/media`,w,{timeout:6e4})).data},async delete(c,a){return(await C.delete(`/persone/${c}/media/${a}`)).data}},ae={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4"},se={class:"flex items-center justify-between mb-4"},ne={class:"text-base font-semibold text-gray-900 dark:text-white flex items-center gap-2"},le={key:0,class:"mb-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600"},ie={class:"space-y-3"},de={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},ce={key:0,class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},ue={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},ge={value:"foto"},pe={value:"documento"},ve={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},me=["placeholder"],be={class:"flex gap-2"},ye=["disabled"],_e={key:0},he={key:1,class:"flex items-center justify-center gap-2"},xe={key:1,class:"flex items-center justify-center py-8"},ke={class:"text-center"},fe={class:"text-sm text-gray-600 dark:text-gray-400"},we={key:2,class:"text-center py-8"},$e={class:"text-sm text-gray-500 dark:text-gray-400"},ze={key:3,class:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"},Ce=["onClick"],Me=["src","alt"],je=["onClick"],Be={class:"text-xs text-gray-600 dark:text-gray-400 text-center truncate w-full"},Ee={class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all flex items-center justify-center opacity-0 group-hover:opacity-100"},Te={class:"flex gap-2"},Ie=["onClick","title"],Se=["onClick","title"],Ve={key:2,class:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 text-white text-xs p-2"},Ae={class:"truncate"},Le=["src","alt"],Ao={__name:"MediaGallery",props:{personaId:{type:Number,required:!0}},setup(c){const a=c,y=R(),t=p=>y.t(p),w=_([]),m=_(!1),$=_(!1),b=_(null),f=_("foto"),u=_(""),M=_(!1),j=_(null),T=async()=>{m.value=!0;try{const p=await Q.getByPersona(a.personaId);w.value=p.data||[]}catch(p){console.error("Errore nel caricamento dei media:",p)}finally{m.value=!1}},V=p=>{b.value=p.target.files[0]},A=async()=>{var d,g,k,F,U;if(!b.value){alert(t("media.select_file_error")||"Seleziona un file da caricare");return}const p=20*1024*1024;if(b.value.size>p){alert(t("media.file_too_large")||"Il file è troppo grande. Dimensione massima: 20MB");return}if(!f.value||f.value!=="foto"&&f.value!=="documento"){alert(t("media.select_type_error")||"Seleziona un tipo di media (foto o documento)");return}M.value=!0;try{console.log("Upload file info:",{name:b.value.name,size:b.value.size,type:b.value.type,uploadType:f.value,personaId:a.personaId}),await Q.upload(a.personaId,b.value,f.value,u.value||""),await T(),H()}catch(z){console.error("Errore nel caricamento del file:",z),console.error("Error response:",(d=z.response)==null?void 0:d.data);let B=t("media.upload_error")||"Errore nel caricamento del file";if((k=(g=z.response)==null?void 0:g.data)!=null&&k.errors){const N=z.response.data.errors,Y=Object.keys(N).map(D=>{const te=Array.isArray(N[D])?N[D]:[N[D]];return`${D}: ${te.join(", ")}`}).join(`
`);B=B+`

`+Y,z.response.data.debug&&(B+=`

Debug:
`,B+=`- File ricevuto: ${z.response.data.debug.has_file?"Sì":"No"}
`,B+=`- Dimensione file: ${z.response.data.debug.file_size?(z.response.data.debug.file_size/1024/1024).toFixed(2)+" MB":"N/A"}
`,B+=`- post_max_size PHP: ${z.response.data.debug.post_max_size}
`,B+=`- upload_max_filesize PHP: ${z.response.data.debug.upload_max_filesize}`)}else(U=(F=z.response)==null?void 0:F.data)!=null&&U.message&&(B=z.response.data.message);alert(B)}finally{M.value=!1}},H=()=>{$.value=!1,b.value=null,u.value="",f.value="foto",document.querySelector('input[type="file"]')&&(document.querySelector('input[type="file"]').value="")},h=async p=>{const d=t("media.delete_confirm")||"Sei sicuro di voler eliminare questo media?";if(confirm(d))try{await Q.delete(a.personaId,p.id),await T()}catch(g){console.error("Errore nell'eliminazione del media:",g);const k=t("media.delete_error")||"Errore nell'eliminazione del media";alert(k)}},x=p=>`/storage/${p.percorso}`,v=p=>{j.value=p},s=()=>{j.value=null},r=p=>{const d=x(p),g=document.createElement("a");g.href=d,g.download=p.nome_file,g.click()},i=p=>{if(!p)return"0 B";const d=1024,g=["B","KB","MB","GB"],k=Math.floor(Math.log(p)/Math.log(d));return Math.round(p/Math.pow(d,k)*100)/100+" "+g[k]};return W(()=>{T(),Object.keys(y.translations).length===0&&y.loadTranslations()}),X(()=>a.personaId,()=>{T()}),(p,d)=>(l(),n("div",ae,[e("div",se,[e("h3",ne,[d[4]||(d[4]=e("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),S(" "+o(t("media.gallery")),1)]),$.value?E("",!0):(l(),n("button",{key:0,onClick:d[0]||(d[0]=g=>$.value=!0),class:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors"},[d[5]||(d[5]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),S(" "+o(t("media.upload")),1)]))]),$.value?(l(),n("div",le,[e("div",ie,[e("div",null,[e("label",de,o(t("media.file")),1),e("input",{ref:"fileInput",type:"file",onChange:V,class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",accept:"image/*,.pdf,.doc,.docx"},null,544),b.value?(l(),n("p",ce,o(b.value.name)+" ("+o(i(b.value.size))+") ",1)):E("",!0)]),e("div",null,[e("label",ue,o(t("media.type")),1),I(e("select",{"onUpdate:modelValue":d[1]||(d[1]=g=>f.value=g),class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e("option",ge,o(t("media.photo")),1),e("option",pe,o(t("media.document")),1)],512),[[Z,f.value]])]),e("div",null,[e("label",ve,o(t("media.description"))+" ("+o(t("common.optional"))+") ",1),I(e("textarea",{"onUpdate:modelValue":d[2]||(d[2]=g=>u.value=g),rows:"2",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:t("media.description_placeholder")},null,8,me),[[L,u.value]])]),e("div",be,[e("button",{onClick:A,disabled:!b.value||M.value,class:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[M.value?(l(),n("span",he,[d[6]||(d[6]=e("svg",{class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),S(" "+o(t("media.uploading")),1)])):(l(),n("span",_e,o(t("media.upload")),1))],8,ye),e("button",{onClick:H,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-600 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors"},o(t("common.cancel")),1)])])])):E("",!0),m.value?(l(),n("div",xe,[e("div",ke,[d[7]||(d[7]=e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-2"},null,-1)),e("p",fe,o(t("common.loading")),1)])])):w.value.length===0?(l(),n("div",we,[d[8]||(d[8]=e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),e("p",$e,o(t("media.no_media")),1)])):(l(),n("div",ze,[(l(!0),n(q,null,O(w.value,g=>{var k;return l(),n("div",{key:g.id,class:"group relative bg-gray-100 dark:bg-gray-700 rounded-lg overflow-hidden border border-gray-200 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-500 transition-colors"},[g.tipo==="foto"||(k=g.mime_type)!=null&&k.startsWith("image/")?(l(),n("div",{key:0,onClick:F=>v(g),class:"aspect-square cursor-pointer bg-gray-200 dark:bg-gray-800 flex items-center justify-center overflow-hidden"},[e("img",{src:x(g),alt:g.descrizione||g.nome_file,class:"w-full h-full object-cover group-hover:scale-105 transition-transform"},null,8,Me)],8,Ce)):(l(),n("div",{key:1,onClick:F=>r(g),class:"aspect-square cursor-pointer bg-gray-200 dark:bg-gray-800 flex flex-col items-center justify-center p-4"},[d[9]||(d[9]=e("svg",{class:"w-12 h-12 text-gray-400 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})],-1)),e("p",Be,o(g.nome_file),1)],8,je)),e("div",Ee,[e("div",Te,[e("button",{onClick:J(F=>{var U;return g.tipo==="foto"||(U=g.mime_type)!=null&&U.startsWith("image/")?v(g):r(g)},["stop"]),class:"p-2 bg-white rounded-lg hover:bg-gray-100 transition-colors",title:g.tipo==="foto"?t("media.view"):t("media.download")},[...d[10]||(d[10]=[e("svg",{class:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)])],8,Ie),e("button",{onClick:J(F=>h(g),["stop"]),class:"p-2 bg-red-500 rounded-lg hover:bg-red-600 transition-colors",title:t("common.delete")},[...d[11]||(d[11]=[e("svg",{class:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Se)])]),g.descrizione?(l(),n("div",Ve,[e("p",Ae,o(g.descrizione),1)])):E("",!0)])}),128))])),j.value?(l(),n("div",{key:4,onClick:s,class:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4"},[e("button",{onClick:s,class:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors"},[...d[12]||(d[12]=[e("svg",{class:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])]),e("img",{src:x(j.value),alt:j.value.descrizione||j.value.nome_file,class:"max-w-full max-h-full object-contain",onClick:d[3]||(d[3]=J(()=>{},["stop"]))},null,8,Le)])):E("",!0)]))}},He={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4 flex flex-col h-full max-h-[680px] w-full"},Fe={class:"flex items-center justify-between mb-4 flex-shrink-0"},Ue={class:"text-base font-semibold text-gray-900 dark:text-white flex items-center gap-2"},De={key:0,class:"mb-4 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600 flex-shrink-0"},Ne={class:"text-sm font-semibold text-gray-900 dark:text-white mb-3"},Pe={class:"space-y-3"},qe={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},Oe={value:""},Ge={value:"nascita"},Ke={value:"battesimo"},Re={value:"comunione"},We={value:"cresima"},Ye={value:"primo_giorno_asilo"},Je={value:"primo_giorno_scuola"},Qe={value:"licenza_elementare"},Xe={value:"licenza_media"},Ze={value:"diploma_superiore"},et={value:"laurea"},tt={value:"matrimonio"},ot={value:"divorzio"},rt={value:"lavoro"},at={value:"cambio_lavoro"},st={value:"militare"},nt={value:"guerra"},lt={value:"trasloco"},it={value:"emigrazione"},dt={value:"immigrazione"},ct={value:"malattia"},ut={value:"guarigione"},gt={value:"pensione"},pt={value:"morte"},vt={value:"sepoltura"},mt={value:"altro"},bt={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},yt=["placeholder"],_t={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},ht=["placeholder"],xt={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},kt={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},ft={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},wt=["placeholder"],$t={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},zt=["placeholder"],Ct={class:"flex gap-2"},Mt=["disabled"],jt={key:0},Bt={key:1,class:"flex items-center justify-center gap-2"},Et={key:1,class:"flex items-center justify-center py-8 flex-1"},Tt={class:"text-center"},It={class:"text-sm text-gray-600 dark:text-gray-400"},St={key:2,class:"text-center py-8 flex-1 flex items-center justify-center"},Vt={class:"text-sm text-gray-500 dark:text-gray-400"},At={key:3,class:"relative flex-1 min-h-0 overflow-hidden"},Lt={class:"space-y-4 overflow-y-auto h-full pr-2",style:{"max-height":"100%"}},Ht={class:"bg-gray-50 dark:bg-gray-700/50 rounded-lg p-3 border border-gray-200 dark:border-gray-600 hover:border-blue-500 dark:hover:border-blue-500 transition-colors"},Ft={class:"flex items-start justify-between"},Ut={class:"flex-1"},Dt={class:"flex items-center gap-2 mb-1"},Nt={class:"text-xs font-semibold px-2 py-0.5 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded"},Pt={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},qt={class:"text-sm font-semibold text-gray-900 dark:text-white mb-1"},Ot={key:0,class:"text-xs text-gray-600 dark:text-gray-400 mb-1"},Gt={key:1,class:"flex items-center gap-1 text-xs text-gray-500 dark:text-gray-400 mb-1"},Kt={key:2,class:"text-xs text-gray-500 dark:text-gray-400 italic"},Rt={key:0,class:"flex gap-1 ml-2"},Wt=["onClick","title"],Yt=["onClick","title"],Jt={key:1,class:"ml-2 text-xs text-gray-400 dark:text-gray-500 italic"},Lo={__name:"Timeline",props:{personaId:{type:Number,required:!0},persona:{type:Object,default:null}},setup(c){const a=c,y=R(),t=s=>y.t(s),w=_([]),m=_(!1),$=_(!1),b=_(null),f=_(!1),u=_({tipo_evento:"",titolo:"",descrizione:"",data_evento:"",luogo:"",note:""}),M=ee(()=>{var r,i,p,d,g;const s=[];return((r=a.persona)!=null&&r.nato_il||(i=a.persona)!=null&&i.nato_a)&&s.push({id:"nascita_virtuale",tipo_evento:"nascita",titolo:t("eventi.birth"),descrizione:a.persona.nato_a?`${t("persona.birth_place")}: ${a.persona.nato_a}`:"",data_evento:a.persona.nato_il||null,luogo:a.persona.nato_a||"",note:"",virtuale:!0}),(p=a.persona)!=null&&p.consorti&&Array.isArray(a.persona.consorti)&&a.persona.consorti.forEach((k,F)=>{var U;if(k.data_legame){let z="matrimonio",B=t("eventi.marriage");if(k.tipo_evento_legame){const D=((U=k.tipo_evento_legame.nome)==null?void 0:U.toLowerCase())||"";D==="unione civile"?(z="matrimonio",B=t("messages.unione_civile")||"Unione Civile"):D==="convivenza di fatto"?(z="matrimonio",B=t("messages.convivenza_di_fatto")||"Convivenza di Fatto"):D==="altro"&&(z="matrimonio",B=t("messages.altro")||"Altro")}const N=k.nome_completo||`${k.nome||""} ${k.cognome||""}`.trim(),Y=N?`${t("persona.consorte")}: ${N}`:"";s.push({id:`matrimonio_virtuale_${F}`,tipo_evento:z,titolo:B,descrizione:Y,data_evento:k.data_legame,luogo:k.luogo_legame||"",note:"",virtuale:!0})}}),(d=a.persona)!=null&&d.deceduto_il&&((g=a.persona)!=null&&g.deceduto_a)&&a.persona.deceduto_a!=="0"&&a.persona.deceduto_a!==""&&s.push({id:"morte_virtuale",tipo_evento:"morte",titolo:t("eventi.death"),descrizione:`${t("persona.death_place")}: ${a.persona.deceduto_a}`,data_evento:a.persona.deceduto_il,luogo:a.persona.deceduto_a,note:"",virtuale:!0}),s}),j=ee(()=>[...w.value,...M.value].sort((r,i)=>!r.data_evento&&!i.data_evento?0:r.data_evento?i.data_evento?new Date(r.data_evento)-new Date(i.data_evento):-1:1)),T=async()=>{m.value=!0;try{const s=await G.getByPersona(a.personaId);w.value=s.data||[]}catch(s){console.error("Errore nel caricamento degli eventi:",s)}finally{m.value=!1}},V=async()=>{if(!(!u.value.tipo_evento||!u.value.titolo)){f.value=!0;try{b.value?await G.update(a.personaId,b.value.id,u.value):await G.create(a.personaId,u.value),await T(),h()}catch(s){console.error("Errore nel salvataggio dell'evento:",s);const r=t("eventi.save_error")||"Errore nel salvataggio dell'evento";alert(r)}finally{f.value=!1}}},A=s=>{b.value=s,u.value={tipo_evento:s.tipo_evento,titolo:s.titolo,descrizione:s.descrizione||"",data_evento:s.data_evento||"",luogo:s.luogo||"",note:s.note||""},$.value=!0},H=async s=>{const r=t("eventi.delete_confirm")||"Sei sicuro di voler eliminare questo evento?";if(confirm(r))try{await G.delete(a.personaId,s.id),await T()}catch(i){console.error("Errore nell'eliminazione dell'evento:",i);const p=t("eventi.delete_error")||"Errore nell'eliminazione dell'evento";alert(p)}},h=()=>{$.value=!1,b.value=null,u.value={tipo_evento:"",titolo:"",descrizione:"",data_evento:"",luogo:"",note:""}},x=s=>{if(!s)return"";try{const r=new Date(s),i=String(r.getDate()).padStart(2,"0"),p=String(r.getMonth()+1).padStart(2,"0"),d=r.getFullYear();return`${i}/${p}/${d}`}catch{return s}},v=s=>({nascita:t("eventi.birth"),battesimo:t("eventi.baptism"),comunione:t("eventi.communion"),cresima:t("eventi.confirmation"),primo_giorno_asilo:t("eventi.first_day_kindergarten"),primo_giorno_scuola:t("eventi.first_day_school"),licenza_elementare:t("eventi.elementary_license"),licenza_media:t("eventi.middle_school_license"),diploma_superiore:t("eventi.high_school_diploma"),laurea:t("eventi.graduation"),matrimonio:t("eventi.marriage"),divorzio:t("eventi.divorce"),lavoro:t("eventi.work"),cambio_lavoro:t("eventi.job_change"),militare:t("eventi.military"),guerra:t("eventi.war"),trasloco:t("eventi.move"),emigrazione:t("eventi.emigration"),immigrazione:t("eventi.immigration"),malattia:t("eventi.illness"),guarigione:t("eventi.recovery"),pensione:t("eventi.retirement"),morte:t("eventi.death"),sepoltura:t("eventi.burial"),altro:t("eventi.other")})[s]||s;return W(()=>{T(),Object.keys(y.translations).length===0&&y.loadTranslations()}),X(()=>a.personaId,()=>{T()}),(s,r)=>(l(),n("div",He,[e("div",Fe,[e("h3",Ue,[r[7]||(r[7]=e("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),S(" "+o(t("eventi.timeline")),1)]),$.value?E("",!0):(l(),n("button",{key:0,onClick:r[0]||(r[0]=i=>{$.value=!0,b.value=null}),class:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors"},[r[8]||(r[8]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),S(" "+o(t("eventi.add")),1)]))]),$.value?(l(),n("div",De,[e("h4",Ne,o(b.value?t("eventi.edit_event"):t("eventi.new_event")),1),e("div",Pe,[e("div",null,[e("label",qe,o(t("eventi.event_type"))+" * ",1),I(e("select",{"onUpdate:modelValue":r[1]||(r[1]=i=>u.value.tipo_evento=i),class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e("option",Oe,o(t("eventi.select_type")),1),e("option",Ge,o(t("eventi.birth")),1),e("option",Ke,o(t("eventi.baptism")),1),e("option",Re,o(t("eventi.communion")),1),e("option",We,o(t("eventi.confirmation")),1),e("option",Ye,o(t("eventi.first_day_kindergarten")),1),e("option",Je,o(t("eventi.first_day_school")),1),e("option",Qe,o(t("eventi.elementary_license")),1),e("option",Xe,o(t("eventi.middle_school_license")),1),e("option",Ze,o(t("eventi.high_school_diploma")),1),e("option",et,o(t("eventi.graduation")),1),e("option",tt,o(t("eventi.marriage")),1),e("option",ot,o(t("eventi.divorce")),1),e("option",rt,o(t("eventi.work")),1),e("option",at,o(t("eventi.job_change")),1),e("option",st,o(t("eventi.military")),1),e("option",nt,o(t("eventi.war")),1),e("option",lt,o(t("eventi.move")),1),e("option",it,o(t("eventi.emigration")),1),e("option",dt,o(t("eventi.immigration")),1),e("option",ct,o(t("eventi.illness")),1),e("option",ut,o(t("eventi.recovery")),1),e("option",gt,o(t("eventi.retirement")),1),e("option",pt,o(t("eventi.death")),1),e("option",vt,o(t("eventi.burial")),1),e("option",mt,o(t("eventi.other")),1)],512),[[Z,u.value.tipo_evento]])]),e("div",null,[e("label",bt,o(t("eventi.title"))+" * ",1),I(e("input",{"onUpdate:modelValue":r[2]||(r[2]=i=>u.value.titolo=i),type:"text",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:t("eventi.title_placeholder")},null,8,yt),[[L,u.value.titolo]])]),e("div",null,[e("label",_t,o(t("eventi.description")),1),I(e("textarea",{"onUpdate:modelValue":r[3]||(r[3]=i=>u.value.descrizione=i),rows:"2",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:t("eventi.description_placeholder")},null,8,ht),[[L,u.value.descrizione]])]),e("div",xt,[e("div",null,[e("label",kt,o(t("eventi.date")),1),I(e("input",{"onUpdate:modelValue":r[4]||(r[4]=i=>u.value.data_evento=i),type:"date",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[L,u.value.data_evento]])]),e("div",null,[e("label",ft,o(t("eventi.place")),1),I(e("input",{"onUpdate:modelValue":r[5]||(r[5]=i=>u.value.luogo=i),type:"text",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:t("eventi.place_placeholder")},null,8,wt),[[L,u.value.luogo]])])]),e("div",null,[e("label",$t,o(t("eventi.notes")),1),I(e("textarea",{"onUpdate:modelValue":r[6]||(r[6]=i=>u.value.note=i),rows:"2",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:t("eventi.notes_placeholder")},null,8,zt),[[L,u.value.note]])]),e("div",Ct,[e("button",{onClick:V,disabled:!u.value.tipo_evento||!u.value.titolo||f.value,class:"flex-1 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[f.value?(l(),n("span",Bt,[r[9]||(r[9]=e("svg",{class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),S(" "+o(t("common.loading")),1)])):(l(),n("span",jt,o(t("common.save")),1))],8,Mt),e("button",{onClick:h,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-600 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-700 transition-colors"},o(t("common.cancel")),1)])])])):E("",!0),m.value?(l(),n("div",Et,[e("div",Tt,[r[10]||(r[10]=e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mb-2"},null,-1)),e("p",It,o(t("common.loading")),1)])])):j.value.length===0?(l(),n("div",St,[e("div",null,[r[11]||(r[11]=e("svg",{class:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",Vt,o(t("eventi.no_events")),1)])])):(l(),n("div",At,[r[16]||(r[16]=e("div",{class:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-300 dark:bg-gray-600"},null,-1)),e("div",Lt,[(l(!0),n(q,null,O(j.value,i=>(l(),n("div",{key:i.id,class:"relative pl-10"},[r[15]||(r[15]=e("div",{class:"absolute left-2 top-2 w-4 h-4 bg-blue-600 rounded-full border-2 border-white dark:border-gray-800"},null,-1)),e("div",Ht,[e("div",Ft,[e("div",Ut,[e("div",Dt,[e("span",Nt,o(v(i.tipo_evento)),1),i.data_evento?(l(),n("span",Pt,o(x(i.data_evento)),1)):E("",!0)]),e("h4",qt,o(i.titolo),1),i.descrizione?(l(),n("p",Ot,o(i.descrizione),1)):E("",!0),i.luogo?(l(),n("div",Gt,[r[12]||(r[12]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})],-1)),S(" "+o(i.luogo),1)])):E("",!0),i.note?(l(),n("p",Kt,o(i.note),1)):E("",!0)]),i.virtuale?(l(),n("div",Jt,o(t("persona.personal_info")),1)):(l(),n("div",Rt,[e("button",{onClick:p=>A(i),class:"p-1 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded transition-colors",title:t("common.edit")},[...r[13]||(r[13]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Wt),e("button",{onClick:p=>H(i),class:"p-1 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:t("common.delete")},[...r[14]||(r[14]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,Yt)]))])])]))),128))])]))]))}},K={async getByPersona(c){return(await C.get(`/persone/${c}/note`)).data},async create(c,a){return(await C.post(`/persone/${c}/note`,{contenuto:a})).data},async update(c,a,y){return(await C.put(`/persone/${c}/note/${a}`,{contenuto:y})).data},async delete(c,a){return(await C.delete(`/persone/${c}/note/${a}`)).data}},Qt={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4"},Xt={class:"text-base font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},Zt={key:0,class:"mb-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600"},eo=["placeholder"],to={class:"flex gap-2"},oo=["disabled"],ro={key:2,class:"text-center py-4"},ao={key:3,class:"text-center py-4 text-sm text-gray-500 dark:text-gray-400"},so={key:4,class:"space-y-2"},no={class:"flex items-start justify-between mb-1"},lo={key:0,class:"text-xs text-gray-500 dark:text-gray-400"},io={class:"flex gap-1"},co=["onClick"],uo=["onClick"],go={class:"text-sm text-gray-900 dark:text-white whitespace-pre-wrap"},Ho={__name:"NoteSection",props:{personaId:{type:Number,required:!0}},setup(c){const a=c,y=R(),t=h=>y.t(h),w=_([]),m=_(!1),$=_(!1),b=_(!1),f=_(null),u=_({contenuto:""}),M=async()=>{m.value=!0;try{const h=await K.getByPersona(a.personaId);w.value=h.data||[]}catch(h){console.error("Errore nel caricamento delle note:",h)}finally{m.value=!1}},j=async()=>{if(u.value.contenuto.trim()){b.value=!0;try{f.value?await K.update(a.personaId,f.value.id,u.value.contenuto):await K.create(a.personaId,u.value.contenuto),await M(),A()}catch(h){console.error("Errore nel salvataggio della nota:",h)}finally{b.value=!1}}},T=h=>{f.value=h,u.value.contenuto=h.contenuto,$.value=!0},V=async h=>{const x=t("note.delete_confirm")||"Eliminare questa nota?";if(confirm(x))try{await K.delete(a.personaId,h.id),await M()}catch(v){console.error("Errore nell'eliminazione della nota:",v)}},A=()=>{$.value=!1,f.value=null,u.value.contenuto=""},H=h=>{if(!h)return"";try{return new Date(h).toLocaleDateString("it-IT")}catch{return h}};return W(()=>{M(),Object.keys(y.translations).length===0&&y.loadTranslations()}),X(()=>a.personaId,()=>{M()}),(h,x)=>(l(),n("div",Qt,[e("h3",Xt,[x[2]||(x[2]=e("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)),S(" "+o(t("note.notes")),1)]),$.value?(l(),n("div",Zt,[I(e("textarea",{"onUpdate:modelValue":x[0]||(x[0]=v=>u.value.contenuto=v),rows:"3",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white mb-2",placeholder:t("note.placeholder")},null,8,eo),[[L,u.value.contenuto]]),e("div",to,[e("button",{onClick:j,disabled:!u.value.contenuto.trim()||b.value,class:"px-3 py-1.5 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors"},o(t("common.save")),9,oo),e("button",{onClick:A,class:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-600 rounded-lg hover:bg-gray-300 transition-colors"},o(t("common.cancel")),1)])])):(l(),n("button",{key:1,onClick:x[1]||(x[1]=v=>$.value=!0),class:"w-full mb-4 px-3 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors"}," + "+o(t("note.add_note")),1)),m.value?(l(),n("div",ro,[...x[3]||(x[3]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"},null,-1)])])):w.value.length===0?(l(),n("div",ao,o(t("note.no_notes")),1)):(l(),n("div",so,[(l(!0),n(q,null,O(w.value,v=>(l(),n("div",{key:v.id,class:"p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600"},[e("div",no,[v.user?(l(),n("span",lo,o(v.user.name)+" - "+o(H(v.created_at)),1)):E("",!0),e("div",io,[e("button",{onClick:s=>T(v),class:"p-1 text-blue-600 dark:text-blue-400 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded"},[...x[4]||(x[4]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,co),e("button",{onClick:s=>V(v),class:"p-1 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 rounded"},[...x[5]||(x[5]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,uo)])]),e("p",go,o(v.contenuto),1)]))),128))]))]))}},P={async getAll(){return(await C.get("/tags")).data},async create(c){return(await C.post("/tags",c)).data},async update(c,a){return(await C.put(`/tags/${c}`,a)).data},async delete(c){return(await C.delete(`/tags/${c}`)).data},async attachToPersona(c,a){return(await C.post(`/persone/${c}/tags`,{tag_id:a})).data},async detachFromPersona(c,a){return(await C.delete(`/persone/${c}/tags/${a}`)).data}},po={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4"},vo={class:"flex items-start justify-between mb-3"},mo={class:"text-base font-semibold text-gray-900 dark:text-white flex items-center gap-2 mb-1"},bo={class:"text-xs text-gray-500 dark:text-gray-400"},yo={key:0,class:"mb-4 p-3 bg-gray-50 dark:bg-gray-700/50 rounded-lg border border-gray-200 dark:border-gray-600"},_o={class:"mb-3"},ho={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},xo={value:""},ko=["value","disabled"],fo={class:"mb-3 border-t border-gray-300 dark:border-gray-600 pt-3"},wo={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},$o={class:"flex gap-2"},zo=["placeholder"],Co={class:"flex gap-2"},Mo=["disabled"],jo={key:0},Bo={key:1,class:"flex items-center justify-center gap-2"},Eo={key:0,class:"mt-2 text-xs text-gray-500 dark:text-gray-400 text-center"},To={key:2,class:"text-center py-4 text-sm text-gray-500 dark:text-gray-400"},Io={key:3,class:"flex flex-wrap gap-2"},So=["onClick","title"],Fo={__name:"TagSection",props:{personaId:{type:Number,required:!0},personaTags:{type:Array,default:()=>[]}},emits:["tags-updated"],setup(c,{emit:a}){const y=c,t=a,w=R(),m=v=>w.t(v),$=_(!1),b=_(""),f=_([]),u=_(""),M=_("#3b82f6"),j=_(!1),T=async()=>{$.value=!0,await A()},V=()=>{$.value=!1,b.value="",u.value="",M.value="#3b82f6"},A=async()=>{try{const v=await P.getAll();f.value=v.data||[]}catch(v){console.error("Errore nel caricamento dei tag:",v)}},H=async()=>{if(b.value)try{await P.attachToPersona(y.personaId,b.value),t("tags-updated"),V()}catch(v){console.error("Errore nell'aggiunta del tag:",v),alert(m("tag.add_error")||"Errore nell'aggiunta del tag")}},h=async()=>{var v,s,r,i,p,d;if(u.value.trim()){j.value=!0;try{const k=(await P.create({nome:u.value.trim(),colore:M.value})).data;await P.attachToPersona(y.personaId,k.id),await A(),t("tags-updated"),V()}catch(g){console.error("Errore nella creazione del tag:",g);const k=((s=(v=g.response)==null?void 0:v.data)==null?void 0:s.message)||((d=(p=(i=(r=g.response)==null?void 0:r.data)==null?void 0:i.errors)==null?void 0:p.nome)==null?void 0:d[0])||m("tag.create_error")||"Errore nella creazione del tag";alert(k)}finally{j.value=!1}}},x=async v=>{if(confirm(m("tag.remove_confirm")||`Rimuovere il tag "${v.nome}"?`))try{await P.detachFromPersona(y.personaId,v.id),t("tags-updated")}catch(s){console.error("Errore nella rimozione del tag:",s),alert(m("tag.remove_error")||"Errore nella rimozione del tag")}};return W(()=>{Object.keys(w.translations).length===0&&w.loadTranslations()}),(v,s)=>(l(),n("div",po,[e("div",vo,[e("div",null,[e("h3",mo,[s[3]||(s[3]=e("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),S(" "+o(m("tag.tags")),1)]),e("p",bo,o(m("tag.description")),1)])]),$.value?(l(),n("div",yo,[e("div",_o,[e("label",ho,o(m("tag.select_existing")),1),I(e("select",{"onUpdate:modelValue":s[0]||(s[0]=r=>b.value=r),class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e("option",xo,o(m("tag.select_tag")),1),(l(!0),n(q,null,O(f.value,r=>(l(),n("option",{key:r.id,value:r.id,disabled:c.personaTags.some(i=>i.id===r.id)},o(r.nome),9,ko))),128))],512),[[Z,b.value]])]),e("div",fo,[e("label",wo,o(m("tag.or_create_new")),1),e("div",$o,[I(e("input",{"onUpdate:modelValue":s[1]||(s[1]=r=>u.value=r),type:"text",placeholder:m("tag.new_tag_placeholder"),class:"flex-1 px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",onKeyup:oe(h,["enter"])},null,40,zo),[[L,u.value]]),I(e("input",{"onUpdate:modelValue":s[2]||(s[2]=r=>M.value=r),type:"color",class:"w-12 h-10 border border-gray-300 dark:border-gray-600 rounded-lg cursor-pointer",title:"{{ t('tag.color') }}"},null,512),[[L,M.value]])])]),e("div",Co,[b.value?(l(),n("button",{key:0,onClick:H,class:"flex-1 px-3 py-1.5 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 transition-colors"},o(m("tag.add")),1)):u.value?(l(),n("button",{key:1,onClick:h,disabled:j.value,class:"flex-1 px-3 py-1.5 text-sm font-medium text-white bg-green-600 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors"},[j.value?(l(),n("span",Bo,[s[4]||(s[4]=e("svg",{class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)),S(" "+o(m("common.loading")),1)])):(l(),n("span",jo,o(m("tag.create_and_add")),1))],8,Mo)):E("",!0),e("button",{onClick:V,class:"px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-600 rounded-lg hover:bg-gray-300 transition-colors"},o(m("common.cancel")),1)]),f.value.length===0&&!u.value?(l(),n("div",Eo,o(m("tag.no_tags_available")),1)):E("",!0)])):(l(),n("button",{key:1,onClick:T,class:"w-full mb-4 px-3 py-2 text-sm font-medium text-blue-600 dark:text-blue-400 bg-blue-50 dark:bg-blue-900/20 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors"}," + "+o(m("tag.add_tag")),1)),c.personaTags.length===0?(l(),n("div",To,o(m("tag.no_tags")),1)):(l(),n("div",Io,[(l(!0),n(q,null,O(c.personaTags,r=>(l(),n("span",{key:r.id,class:"inline-flex items-center gap-1.5 px-3 py-1 text-xs font-medium rounded-full",style:re([{backgroundColor:(r.colore||"#3b82f6")+"20",color:r.colore||"#3b82f6",borderColor:r.colore||"#3b82f6"},{border:"1px solid"}])},[S(o(r.nome)+" ",1),e("button",{onClick:i=>x(r),class:"hover:opacity-70 transition-opacity",title:m("tag.remove")},[...s[5]||(s[5]=[e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,So)],4))),128))]))]))}};export{Ao as _,Lo as a,Ho as b,Fo as c,G as e};
