import{h as pe,i as Q,l as W,r as c,x as A,s as ce,c as a,a as e,b as h,n as F,p as N,m as ge,t as s,g as d,w as E,q as v,d as x,v as B,j as U,F as z,z as L,e as be,o as l}from"./app-CVxkeOic.js";import{u as ke}from"./persone-B7qbsWqt.js";import{p as ve}from"./personaService-iYiy0aNM.js";import{t as xe}from"./tipoLegameService-rEorDjCv.js";const he={class:"bg-gray-200 dark:bg-gray-900"},me={class:"bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 mb-3"},ye={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-2"},fe={class:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-2"},_e={class:"flex items-center gap-3"},we={class:"text-xl font-bold text-gray-900 dark:text-white"},Ce={class:"text-xs text-gray-500 dark:text-gray-400"},Me={key:0,class:"flex items-center gap-2"},je={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-4"},Be={key:0,class:"flex items-center justify-center py-12"},ze={class:"text-center"},Le={class:"text-gray-600 dark:text-gray-400"},Ie={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},$e={class:"bg-gradient-to-r from-blue-500 to-blue-600 px-4 py-2"},Ve={class:"text-base font-bold text-white flex items-center gap-2"},Pe={class:"p-4 space-y-4"},Se={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},He={class:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1.5"},Ue={class:"flex items-center gap-1.5"},Ae=["placeholder"],Fe={class:"block text-xs font-semibold text-gray-700 dark:text-gray-300 mb-1.5"},Ne={class:"flex items-center gap-1.5"},Ee=["placeholder"],Te={class:"border-t border-gray-200 dark:border-gray-700 pt-3"},qe={class:"text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide mb-2 flex items-center gap-1.5"},De={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Oe={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},Re=["placeholder"],Ge={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},Je={class:"border-t border-gray-200 dark:border-gray-700 pt-3"},Ke={class:"text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide mb-2 flex items-center gap-1.5"},Qe={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},We={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},Xe=["placeholder"],Ye={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},Ze={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-4"},et={class:"text-base font-semibold text-gray-900 dark:text-white mb-3 flex items-center gap-2"},tt={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},ot={class:"space-y-2"},rt={class:"flex items-center justify-between"},st={class:"text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide"},nt={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},at={key:0,class:"mb-1.5"},lt={class:"flex items-center gap-2"},dt={class:"flex-1 min-w-0"},it={class:"text-xs font-semibold text-gray-900 dark:text-white group-hover:text-blue-600 dark:group-hover:text-blue-400 transition-colors truncate"},ut={key:1,class:"p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800"},pt={class:"flex items-center gap-2"},ct={class:"flex-1 text-xs text-gray-900 dark:text-white"},gt={class:"space-y-1.5"},bt={class:"flex gap-1.5"},kt={value:""},vt=["value","disabled"],xt=["disabled"],ht=["title"],mt={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},yt={key:0,class:"mb-1.5"},ft={class:"flex items-center gap-2"},_t={class:"flex-1 min-w-0"},wt={class:"text-xs font-semibold text-gray-900 dark:text-white group-hover:text-pink-600 dark:group-hover:text-pink-400 transition-colors truncate"},Ct={key:1,class:"p-2 bg-pink-50 dark:bg-pink-900/20 rounded-lg border border-pink-200 dark:border-pink-800"},Mt={class:"flex items-center gap-2"},jt={class:"flex-1 text-xs text-gray-900 dark:text-white"},Bt={class:"space-y-1.5"},zt={class:"flex gap-1.5"},Lt={value:""},It=["value","disabled"],$t=["disabled"],Vt=["title"],Pt={class:"space-y-2"},St={class:"flex items-center justify-between mb-2"},Ht={class:"text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide"},Ut={key:0,class:"mb-2 p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800"},At={class:"flex flex-col gap-2"},Ft={class:"flex gap-2"},Nt={value:""},Et=["value","disabled"],Tt=["disabled","title"],qt=["title"],Dt={class:"text-center text-sm text-gray-600 dark:text-gray-400"},Ot={key:1,class:"space-y-1.5"},Rt={class:"flex items-center gap-2"},Gt={class:"flex-1 min-w-0"},Jt={class:"text-sm font-semibold text-gray-900 dark:text-white truncate"},Kt=["onClick","title"],Qt={key:2,class:"text-xs text-gray-500 dark:text-gray-400 italic"},Wt={class:"flex items-center justify-between mb-2"},Xt={class:"text-xs font-semibold text-gray-700 dark:text-gray-300 uppercase tracking-wide"},Yt={key:0,class:"mb-2 p-2 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800"},Zt={class:"flex flex-col gap-2"},eo={class:"flex gap-2"},to={value:""},oo=["value","disabled"],ro=["disabled","title"],so=["title"],no={class:"text-center text-sm text-gray-600 dark:text-gray-400"},ao={key:1,class:"space-y-1.5"},lo={class:"flex items-center gap-2"},io={class:"flex-1 min-w-0"},uo={class:"text-sm font-semibold text-gray-900 dark:text-white truncate"},po=["onClick","title"],co={key:2,class:"text-xs text-gray-500 dark:text-gray-400 italic"},go={key:0,class:"text-center py-6"},bo={class:"text-sm text-gray-500 dark:text-gray-400"},ko={class:"flex flex-col sm:flex-row justify-end gap-2 pt-2"},vo=["disabled"],xo={key:0,class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},ho={key:1,class:"w-4 h-4 animate-spin",fill:"none",viewBox:"0 0 24 24"},Co={__name:"Edit",setup(mo){const u=ce(),I=be(),i=ke(),$=pe(),n=r=>$.t(r);Q(()=>{Object.keys($.translations).length===0&&$.loadTranslations()}),W(()=>$.locale,()=>{$.loadTranslations()});const p=c({nome:"",cognome:"",nato_a:"",nato_il:"",deceduto_a:"",deceduto_il:""}),V=c(!1),T=c([]),q=c([]),S=c(!1),H=c(!1),w=c(""),C=c(""),M=c(""),j=c(""),m=c([]),y=c([]),b=c(""),k=c(""),D=A(()=>m.value.map(r=>r.id)),O=A(()=>y.value.map(r=>r.id)),X=r=>[...r].sort((t,g)=>{const o=(t.cognome||"").toLowerCase(),f=(g.cognome||"").toLowerCase();if(o!==f)return o.localeCompare(f,"it");const K=(t.nome||"").toLowerCase(),P=(g.nome||"").toLowerCase();return K.localeCompare(P,"it")}),_=A(()=>X(T.value));Q(async()=>{await Promise.all([i.fetchPersona(u.params.id),Y(),Z()])});const Y=async()=>{try{const r=await ve.getAllPeople();T.value=r.data.data||r.data||[]}catch(r){console.error("Errore nel caricamento delle persone:",r)}},Z=async()=>{try{const r=await xe.getAll();q.value=r.data.data||r.data||[]}catch(r){console.error("Errore nel caricamento dei tipi di legame:",r)}};W(()=>i.persona,r=>{r&&(p.value={nome:r.nome||"",cognome:r.cognome||"",nato_a:r.nato_a||"",nato_il:r.nato_il||"",deceduto_a:r.deceduto_a||"",deceduto_il:r.deceduto_il||""},m.value=r.consorti?[...r.consorti]:[],y.value=r.figli?[...r.figli]:[],b.value=r.padre?r.padre.id.toString():"",k.value=r.madre?r.madre.id.toString():"")},{immediate:!0});const R=r=>{window.location.href=`/persone/${r}/edit`},ee=()=>{if(!w.value)return;const r=_.value.find(t=>t.id===parseInt(w.value));r&&!D.value.includes(r.id)&&(m.value.push(r),w.value="",S.value=!1)},te=r=>{m.value=m.value.filter(t=>t.id!==r)},oe=()=>{if(!C.value)return;const r=_.value.find(t=>t.id===parseInt(C.value));r&&!O.value.includes(r.id)&&(y.value.push(r),C.value="",H.value=!1)},re=r=>{y.value=y.value.filter(t=>t.id!==r)},se=()=>{M.value&&(b.value=M.value,M.value="")},ne=()=>{j.value&&(k.value=j.value,j.value="")},ae=()=>{I.push({path:"/persone/create",query:{relazione_persona_id:u.params.id,relazione_tipo:"padre",return_to:`/persone/${u.params.id}/edit`}})},le=()=>{I.push({path:"/persone/create",query:{relazione_persona_id:u.params.id,relazione_tipo:"madre",return_to:`/persone/${u.params.id}/edit`}})},de=()=>{I.push({path:"/persone/create",query:{relazione_persona_id:u.params.id,relazione_tipo:"coniuge",return_to:`/persone/${u.params.id}/edit`}})},ie=()=>{I.push({path:"/persone/create",query:{relazione_persona_id:u.params.id,relazione_tipo:"figlio",return_to:`/persone/${u.params.id}/edit`}})},G=r=>{if(!r)return"";const t=_.value.find(g=>g.id===parseInt(r));return t?t.nome_completo:""},J=r=>{const t=q.value.find(g=>g.nome===r);return t?t.id:null},ue=async()=>{V.value=!0;try{const r={};b.value&&(r.padre_id=parseInt(b.value)),k.value&&(r.madre_id=parseInt(k.value));const t=[],g=J("coniuge");g&&m.value.forEach(P=>{t.push({persona_collegata_id:P.id,tipo_legame_id:g})});const o=J("padre");o&&y.value.forEach(P=>{t.push({persona_collegata_id:P.id,tipo_legame_id:o})});const f={...p.value};Object.keys(r).length>0&&(f.genitori=r),t.length>0&&(f.relazioni=t),(await i.updatePersona(u.params.id,f)).success&&I.push(`/persone/${u.params.id}`)}catch(r){console.error("Errore nel salvataggio:",r)}finally{V.value=!1}};return(r,t)=>{const g=ge("router-link");return l(),a("div",he,[e("div",me,[e("div",ye,[e("div",fe,[e("div",_e,[F(g,{to:"/persone",class:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},{default:N(()=>[t[20]||(t[20]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)),e("span",null,s(n("persona.back_to_list")),1)]),_:1}),e("div",null,[e("h1",we,s(n("persona.edit_title")),1),e("p",Ce,s(n("persona.edit_subtitle")),1)])]),d(i).persona?(l(),a("div",Me,[F(g,{to:`/persone/${r.$route.params.id}`,class:"inline-flex items-center gap-1.5 px-3 py-1.5 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},{default:N(()=>[t[21]||(t[21]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),e("span",null,s(n("persona.view")),1)]),_:1},8,["to"])])):h("",!0)])])]),e("div",je,[d(i).loading?(l(),a("div",Be,[e("div",ze,[t[22]||(t[22]=e("div",{class:"inline-block animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mb-3"},null,-1)),e("p",Le,s(n("persona.loading_info")),1)])])):d(i).persona?(l(),a("form",{key:1,onSubmit:E(ue,["prevent"]),class:"space-y-3"},[e("div",Ie,[e("div",$e,[e("h2",Ve,[t[23]||(t[23]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),v(" "+s(n("persona.personal_info")),1)])]),e("div",Pe,[e("div",Se,[e("div",null,[e("label",He,[e("span",Ue,[t[24]||(t[24]=e("svg",{class:"w-3.5 h-3.5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),v(" "+s(n("persona.nome"))+" * ",1)])]),x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=o=>p.value.nome=o),type:"text",required:"",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:n("persona.enter_name")},null,8,Ae),[[B,p.value.nome]])]),e("div",null,[e("label",Fe,[e("span",Ne,[t[25]||(t[25]=e("svg",{class:"w-3.5 h-3.5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),v(" "+s(n("persona.cognome"))+" * ",1)])]),x(e("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>p.value.cognome=o),type:"text",required:"",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors",placeholder:n("persona.enter_surname")},null,8,Ee),[[B,p.value.cognome]])])]),e("div",Te,[e("h3",qe,[t[26]||(t[26]=e("svg",{class:"w-3.5 h-3.5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),v(" "+s(n("persona.birth")),1)]),e("div",De,[e("div",null,[e("label",Oe,s(n("persona.birth_place")),1),x(e("input",{"onUpdate:modelValue":t[2]||(t[2]=o=>p.value.nato_a=o),type:"text",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors",placeholder:n("persona.birth_place_example")},null,8,Re),[[B,p.value.nato_a]])]),e("div",null,[e("label",Ge,s(n("persona.birth_date")),1),x(e("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>p.value.nato_il=o),type:"date",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-green-500 focus:border-transparent transition-colors"},null,512),[[B,p.value.nato_il]])])])]),e("div",Je,[e("h3",Ke,[t[27]||(t[27]=e("svg",{class:"w-3.5 h-3.5 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),v(" "+s(n("persona.death")),1)]),e("div",Qe,[e("div",null,[e("label",We,s(n("persona.death_place")),1),x(e("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>p.value.deceduto_a=o),type:"text",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors",placeholder:n("persona.death_place_example")},null,8,Xe),[[B,p.value.deceduto_a]])]),e("div",null,[e("label",Ye,s(n("persona.death_date")),1),x(e("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>p.value.deceduto_il=o),type:"date",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-red-500 focus:border-transparent transition-colors"},null,512),[[B,p.value.deceduto_il]])])])])])]),e("div",Ze,[e("h3",et,[t[28]||(t[28]=e("svg",{class:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1)),v(" "+s(n("persona.family_relations")),1)]),e("div",tt,[e("div",ot,[e("div",rt,[e("h4",st,s(n("persona.genitori")),1)]),e("div",null,[e("label",nt,s(n("persona.padre")),1),b.value||d(i).persona.padre?(l(),a("div",at,[d(i).persona.padre&&!b.value?(l(),a("div",{key:0,onClick:t[7]||(t[7]=o=>R(d(i).persona.padre.id)),class:"group p-2 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 hover:border-blue-300 dark:hover:border-blue-700 transition-colors cursor-pointer"},[e("div",lt,[t[30]||(t[30]=e("div",{class:"flex-shrink-0 w-7 h-7 bg-blue-100 dark:bg-blue-900/40 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-3.5 h-3.5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",dt,[e("p",it,s(d(i).persona.padre.nome_completo),1)]),e("button",{type:"button",onClick:t[6]||(t[6]=E(o=>{b.value="",d(i).persona.padre=null},["stop"])),class:"p-0.5 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 rounded"},[...t[29]||(t[29]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):b.value?(l(),a("div",ut,[e("div",pt,[e("span",ct,s(G(b.value)),1),e("button",{type:"button",onClick:t[8]||(t[8]=o=>b.value=""),class:"p-0.5 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 rounded"},[...t[31]||(t[31]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):h("",!0)])):h("",!0),e("div",gt,[e("div",bt,[x(e("select",{"onUpdate:modelValue":t[9]||(t[9]=o=>M.value=o),class:"flex-1 px-2.5 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e("option",kt,s(n("persona.select_existing_father")),1),(l(!0),a(z,null,L(_.value,o=>(l(),a("option",{key:o.id,value:o.id,disabled:o.id===parseInt(d(u).params.id)},s(o.nome_completo)+" (ID: "+s(o.id)+") ",9,vt))),128))],512),[[U,M.value]]),e("button",{type:"button",onClick:se,disabled:!M.value,class:"p-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[...t[32]||(t[32]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])],8,xt),e("button",{type:"button",onClick:ae,class:"p-1.5 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",title:n("persona.create_new_father")},[...t[33]||(t[33]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,ht)])])]),e("div",null,[e("label",mt,s(n("persona.madre")),1),k.value||d(i).persona.madre?(l(),a("div",yt,[d(i).persona.madre&&!k.value?(l(),a("div",{key:0,onClick:t[11]||(t[11]=o=>R(d(i).persona.madre.id)),class:"group p-2 bg-pink-50 dark:bg-pink-900/20 rounded-lg border border-pink-200 dark:border-pink-800 hover:border-pink-300 dark:hover:border-pink-700 transition-colors cursor-pointer"},[e("div",ft,[t[35]||(t[35]=e("div",{class:"flex-shrink-0 w-7 h-7 bg-pink-100 dark:bg-pink-900/40 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-3.5 h-3.5 text-pink-600 dark:text-pink-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})])],-1)),e("div",_t,[e("p",wt,s(d(i).persona.madre.nome_completo),1)]),e("button",{type:"button",onClick:t[10]||(t[10]=E(o=>{k.value="",d(i).persona.madre=null},["stop"])),class:"p-0.5 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 rounded"},[...t[34]||(t[34]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):k.value?(l(),a("div",Ct,[e("div",Mt,[e("span",jt,s(G(k.value)),1),e("button",{type:"button",onClick:t[12]||(t[12]=o=>k.value=""),class:"p-0.5 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 rounded"},[...t[36]||(t[36]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])):h("",!0)])):h("",!0),e("div",Bt,[e("div",zt,[x(e("select",{"onUpdate:modelValue":t[13]||(t[13]=o=>j.value=o),class:"flex-1 px-2.5 py-1.5 text-xs border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e("option",Lt,s(n("persona.select_existing_mother")),1),(l(!0),a(z,null,L(_.value,o=>(l(),a("option",{key:o.id,value:o.id,disabled:o.id===parseInt(d(u).params.id)},s(o.nome_completo)+" (ID: "+s(o.id)+") ",9,It))),128))],512),[[U,j.value]]),e("button",{type:"button",onClick:ne,disabled:!j.value,class:"p-1.5 bg-pink-600 text-white rounded-lg hover:bg-pink-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"},[...t[37]||(t[37]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])],8,$t),e("button",{type:"button",onClick:le,class:"p-1.5 bg-pink-600 text-white rounded-lg hover:bg-pink-700 transition-colors",title:n("persona.create_new_mother")},[...t[38]||(t[38]=[e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)])],8,Vt)])])])]),e("div",Pt,[e("div",null,[e("div",St,[e("h4",Ht,s(n("persona.consorti")),1),e("button",{type:"button",onClick:t[14]||(t[14]=o=>S.value=!0),class:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-700 dark:text-purple-300 bg-purple-100 dark:bg-purple-900/30 rounded-lg hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors"},[t[39]||(t[39]=e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),v(" "+s(n("persona.add")),1)])]),S.value?(l(),a("div",Ut,[e("div",At,[e("div",Ft,[x(e("select",{"onUpdate:modelValue":t[15]||(t[15]=o=>w.value=o),class:"flex-1 px-3 py-2 border border-purple-300 dark:border-purple-700 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"},[e("option",Nt,s(n("persona.select_existing_spouse")),1),(l(!0),a(z,null,L(_.value,o=>(l(),a("option",{key:o.id,value:o.id,disabled:o.id===d(u).params.id||D.value.includes(o.id)},s(o.nome_completo)+" (ID: "+s(o.id)+") ",9,Et))),128))],512),[[U,w.value]]),e("button",{type:"button",onClick:ee,disabled:!w.value,class:"p-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:n("persona.add_spouse")},[...t[40]||(t[40]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])],8,Tt),e("button",{type:"button",onClick:t[16]||(t[16]=o=>S.value=!1),class:"p-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-700 transition-colors",title:n("common.cancel")},[...t[41]||(t[41]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,qt)]),e("div",Dt,s(n("persona.or")),1),e("button",{type:"button",onClick:de,class:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center gap-2"},[t[42]||(t[42]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),v(" "+s(n("persona.create_new_spouse")),1)])])])):h("",!0),m.value.length>0?(l(),a("div",Ot,[(l(!0),a(z,null,L(m.value,o=>(l(),a("div",{key:o.id,class:"group p-2 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800 hover:border-purple-300 dark:hover:border-purple-700 transition-colors"},[e("div",Rt,[t[44]||(t[44]=e("div",{class:"flex-shrink-0 w-7 h-7 bg-purple-100 dark:bg-purple-900/40 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-3.5 h-3.5 text-purple-600 dark:text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})])],-1)),e("div",Gt,[e("p",Jt,s(o.nome_completo),1)]),e("button",{type:"button",onClick:f=>te(o.id),class:"p-1 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:n("persona.remove_spouse")},[...t[43]||(t[43]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,Kt)])]))),128))])):(l(),a("p",Qt,s(n("persona.no_spouse_added")),1))]),e("div",null,[e("div",Wt,[e("h4",Xt,s(n("persona.figli")),1),e("button",{type:"button",onClick:t[17]||(t[17]=o=>H.value=!0),class:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-green-700 dark:text-green-300 bg-green-100 dark:bg-green-900/30 rounded-lg hover:bg-green-200 dark:hover:bg-green-900/50 transition-colors"},[t[45]||(t[45]=e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),v(" "+s(n("persona.add")),1)])]),H.value?(l(),a("div",Yt,[e("div",Zt,[e("div",eo,[x(e("select",{"onUpdate:modelValue":t[18]||(t[18]=o=>C.value=o),class:"flex-1 px-3 py-2 border border-green-300 dark:border-green-700 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white text-sm"},[e("option",to,s(n("persona.select_existing_child")),1),(l(!0),a(z,null,L(_.value,o=>(l(),a("option",{key:o.id,value:o.id,disabled:o.id===d(u).params.id||O.value.includes(o.id)},s(o.nome_completo)+" (ID: "+s(o.id)+") ",9,oo))),128))],512),[[U,C.value]]),e("button",{type:"button",onClick:oe,disabled:!C.value,class:"p-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",title:n("persona.add_child")},[...t[46]||(t[46]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})],-1)])],8,ro),e("button",{type:"button",onClick:t[19]||(t[19]=o=>H.value=!1),class:"p-2 bg-gray-300 dark:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-400 dark:hover:bg-gray-700 transition-colors",title:n("common.cancel")},[...t[47]||(t[47]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,so)]),e("div",no,s(n("persona.or")),1),e("button",{type:"button",onClick:ie,class:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center gap-2"},[t[48]||(t[48]=e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1)),v(" "+s(n("persona.create_new_child")),1)])])])):h("",!0),y.value.length>0?(l(),a("div",ao,[(l(!0),a(z,null,L(y.value,o=>(l(),a("div",{key:o.id,class:"group p-2 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800 hover:border-green-300 dark:hover:border-green-700 transition-colors"},[e("div",lo,[t[50]||(t[50]=e("div",{class:"flex-shrink-0 w-7 h-7 bg-green-100 dark:bg-green-900/40 rounded-lg flex items-center justify-center"},[e("svg",{class:"w-3.5 h-3.5 text-green-600 dark:text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})])],-1)),e("div",io,[e("p",uo,s(o.nome_completo),1)]),e("button",{type:"button",onClick:f=>re(o.id),class:"p-1 text-red-600 dark:text-red-400 hover:bg-red-100 dark:hover:bg-red-900/30 rounded transition-colors",title:n("persona.remove_child")},[...t[49]||(t[49]=[e("svg",{class:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])],8,po)])]))),128))])):(l(),a("p",co,s(n("persona.no_child_added")),1))])])]),!d(i).persona.padre&&!d(i).persona.madre&&(!d(i).persona.consorti||d(i).persona.consorti.length===0)&&(!d(i).persona.figli||d(i).persona.figli.length===0)?(l(),a("div",go,[t[51]||(t[51]=e("svg",{class:"w-10 h-10 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})],-1)),e("p",bo,s(n("persona.no_family_relations")),1)])):h("",!0)]),e("div",ko,[F(g,{to:`/persone/${r.$route.params.id}`,class:"inline-flex items-center justify-center gap-1.5 px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors"},{default:N(()=>[t[52]||(t[52]=e("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)),e("span",null,s(n("common.cancel")),1)]),_:1},8,["to"]),e("button",{type:"submit",disabled:V.value,class:"inline-flex items-center justify-center gap-1.5 px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors shadow-sm"},[V.value?(l(),a("svg",ho,[...t[54]||(t[54]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):(l(),a("svg",xo,[...t[53]||(t[53]=[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)])])),e("span",null,s(V.value?n("persona.saving"):n("persona.save_changes")),1)],8,vo)])],32)):h("",!0)])])}}};export{Co as default};
