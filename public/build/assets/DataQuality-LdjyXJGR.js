import{h as $,r as j,i as B,c as o,a as e,t,b as p,s as n,F as b,D as x,E as N,m as S,o as l,p as y,q as m,y as h}from"./app-C8pxP4al.js";const V={class:"bg-gray-200 dark:bg-gray-900"},D={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},E={class:"flex items-center justify-between mb-6"},F={class:"text-2xl font-bold text-gray-900 dark:text-white"},L=["disabled"],M={key:0,class:"flex items-center justify-center py-12"},T={class:"text-center"},O={class:"text-gray-600 dark:text-gray-400"},Q={key:1,class:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-6 text-center"},A={class:"text-lg font-semibold text-green-800 dark:text-green-300"},G={key:2,class:"space-y-6"},H={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},I={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},J={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},K={class:"text-center p-4 bg-red-50 dark:bg-red-900/20 rounded-lg"},P={class:"text-3xl font-bold text-red-600 dark:text-red-400"},R={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},U={class:"text-center p-4 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg"},W={class:"text-3xl font-bold text-yellow-600 dark:text-yellow-400"},X={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},Y={class:"text-center p-4 bg-orange-50 dark:bg-orange-900/20 rounded-lg"},Z={class:"text-3xl font-bold text-orange-600 dark:text-orange-400"},ee={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},te={class:"text-center p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg"},se={class:"text-3xl font-bold text-purple-600 dark:text-purple-400"},ae={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},re={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},oe={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},le={class:"space-y-2"},de={class:"flex items-start justify-between"},ie={class:"flex-1"},ne={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},ce={key:1,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},ue={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},ge={class:"space-y-2"},_e={class:"flex items-start justify-between"},pe={class:"flex-1"},be={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},xe={key:2,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},ye={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2"},me={class:"space-y-2"},he={class:"flex items-start justify-between"},ke={class:"flex-1"},ve={class:"text-sm text-gray-600 dark:text-gray-400 mt-1"},qe={__name:"DataQuality",setup(fe){const u=$(),d=i=>u.t(i),c=j(!1),a=j({totale_problemi:0,problemi_date:[],problemi_duplicati:[],problemi_relazioni:[]}),k=async()=>{c.value=!0;try{const i=await N.get("/data-quality/check");a.value={totale_problemi:i.data.data.totale_problemi||0,problemi_date:i.data.data.problemi_date||[],problemi_duplicati:i.data.data.problemi_duplicati||[],problemi_relazioni:i.data.data.problemi_relazioni||[]}}catch(i){console.error("Errore nel controllo qualitÃ  dati:",i)}finally{c.value=!1}},g=i=>{const r={alta:"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300",media:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300",bassa:"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"};return r[i]||r.media};return B(()=>{k(),Object.keys(u.translations).length===0&&u.loadTranslations()}),(i,r)=>{var v,f,w,q,z,C;const _=S("router-link");return l(),o("div",V,[e("div",D,[e("div",E,[e("h1",F,t(d("quality.title")),1),e("button",{onClick:k,disabled:c.value,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors"},t(d("quality.run_checks")),9,L)]),c.value?(l(),o("div",M,[e("div",T,[r[0]||(r[0]=e("div",{class:"inline-block animate-spin rounded-full h-10 w-10 border-b-2 border-blue-600 mb-3"},null,-1)),e("p",O,t(d("common.loading")),1)])])):a.value.totale_problemi===0?(l(),o("div",Q,[r[1]||(r[1]=e("svg",{class:"w-16 h-16 text-green-600 dark:text-green-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),e("p",A,t(d("quality.no_issues")),1)])):(l(),o("div",G,[e("div",H,[e("h2",I,t(d("quality.summary")),1),e("div",J,[e("div",K,[e("p",P,t(a.value.totale_problemi),1),e("p",R,t(d("quality.total_issues")),1)]),e("div",U,[e("p",W,t(((v=a.value.problemi_date)==null?void 0:v.length)||0),1),e("p",X,t(d("quality.date_issues")),1)]),e("div",Y,[e("p",Z,t(((f=a.value.problemi_duplicati)==null?void 0:f.length)||0),1),e("p",ee,t(d("quality.duplicate_issues")),1)]),e("div",te,[e("p",se,t(((w=a.value.problemi_relazioni)==null?void 0:w.length)||0),1),e("p",ae,t(d("quality.relationship_issues")),1)])])]),((q=a.value.problemi_date)==null?void 0:q.length)>0?(l(),o("div",re,[e("h3",oe,[r[2]||(r[2]=e("span",{class:"w-2 h-2 bg-yellow-500 rounded-full"},null,-1)),n(" "+t(d("quality.date_issues"))+" ("+t(a.value.problemi_date.length)+") ",1)]),e("div",le,[(l(!0),o(b,null,x(a.value.problemi_date,s=>(l(),o("div",{key:`date-${s.persona_id}`,class:"p-3 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg border border-yellow-200 dark:border-yellow-800"},[e("div",de,[e("div",ie,[y(_,{to:`/persone/${s.persona_id}`,class:"font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400"},{default:m(()=>[n(t(s.persona_nome),1)]),_:2},1032,["to"]),e("p",ne,t(s.messaggio),1)]),e("span",{class:h(["px-2 py-1 text-xs font-medium rounded",g(s.severita)])},t(s.severita),3)])]))),128))])])):p("",!0),((z=a.value.problemi_duplicati)==null?void 0:z.length)>0?(l(),o("div",ce,[e("h3",ue,[r[3]||(r[3]=e("span",{class:"w-2 h-2 bg-orange-500 rounded-full"},null,-1)),n(" "+t(d("quality.duplicate_issues"))+" ("+t(a.value.problemi_duplicati.length)+") ",1)]),e("div",ge,[(l(!0),o(b,null,x(a.value.problemi_duplicati,s=>(l(),o("div",{key:`dup-${s.persona_id}`,class:"p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg border border-orange-200 dark:border-orange-800"},[e("div",_e,[e("div",pe,[y(_,{to:`/persone/${s.persona_id}`,class:"font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400"},{default:m(()=>[n(t(s.persona_nome),1)]),_:2},1032,["to"]),e("p",be,t(s.messaggio),1)]),e("span",{class:h(["px-2 py-1 text-xs font-medium rounded",g(s.severita)])},t(s.severita),3)])]))),128))])])):p("",!0),((C=a.value.problemi_relazioni)==null?void 0:C.length)>0?(l(),o("div",xe,[e("h3",ye,[r[4]||(r[4]=e("span",{class:"w-2 h-2 bg-purple-500 rounded-full"},null,-1)),n(" "+t(d("quality.relationship_issues"))+" ("+t(a.value.problemi_relazioni.length)+") ",1)]),e("div",me,[(l(!0),o(b,null,x(a.value.problemi_relazioni,s=>(l(),o("div",{key:`rel-${s.persona_id}`,class:"p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800"},[e("div",he,[e("div",ke,[y(_,{to:`/persone/${s.persona_id}`,class:"font-semibold text-gray-900 dark:text-white hover:text-blue-600 dark:hover:text-blue-400"},{default:m(()=>[n(t(s.persona_nome),1)]),_:2},1032,["to"]),e("p",ve,t(s.messaggio),1)]),e("span",{class:h(["px-2 py-1 text-xs font-medium rounded",g(s.severita)])},t(s.severita),3)])]))),128))])])):p("",!0)]))])])}}};export{qe as default};
