import{h as U,r as n,i as E,c,a as e,b as V,t as s,d as g,v,j as S,F as $,D as F,E as x,o as m,y as M}from"./app-Db2intbC.js";const j={class:"bg-gray-200 dark:bg-gray-900"},z={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4"},B={class:"flex justify-between items-center mb-6"},D={class:"text-2xl font-bold text-gray-900 dark:text-white"},L={key:0,class:"mb-6 bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6"},N={class:"text-lg font-semibold text-gray-900 dark:text-white mb-4"},T={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},q={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},I={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},O={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},A={class:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1.5"},G={value:"user"},H={value:"admin"},J={class:"flex gap-2 mt-4"},K=["disabled"],P={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden"},Q={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},R={class:"bg-gray-50 dark:bg-gray-700"},W={class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},X={class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},Y={class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},Z={class:"px-4 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase"},ee={class:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700"},te={class:"px-4 py-3 text-sm text-gray-900 dark:text-white"},ae={class:"px-4 py-3 text-sm text-gray-600 dark:text-gray-400"},se={class:"px-4 py-3 text-sm"},re={class:"px-4 py-3 text-sm"},oe={class:"flex gap-2"},le=["onClick"],de=["onClick"],ue={__name:"Index",setup(ne){const y=U(),a=r=>y.t(r),_=n([]),i=n(!1),d=n(null),b=n(!1),l=n({name:"",email:"",password:"",role:"user"}),p=async()=>{try{const r=await x.get("/users");_.value=r.data.data||[]}catch(r){console.error("Errore nel caricamento degli utenti:",r)}},w=async()=>{var r,o;b.value=!0;try{const t={...l.value};t.password||delete t.password,d.value?await x.put(`/users/${d.value.id}`,t):await x.post("/users",t),await p(),h()}catch(t){console.error("Errore nel salvataggio dell'utente:",t),alert(((o=(r=t.response)==null?void 0:r.data)==null?void 0:o.message)||a("users.save_error"))}finally{b.value=!1}},f=r=>{d.value=r,l.value={name:r.name,email:r.email,password:"",role:r.role},i.value=!0},C=async r=>{var t,u;const o=a("users.delete_confirm")||"Eliminare questo utente?";if(confirm(o))try{await x.delete(`/users/${r.id}`),await p()}catch(k){console.error("Errore nell'eliminazione dell'utente:",k),alert(((u=(t=k.response)==null?void 0:t.data)==null?void 0:u.message)||a("users.delete_error"))}},h=()=>{i.value=!1,d.value=null,l.value={name:"",email:"",password:"",role:"user"}};return E(()=>{p(),Object.keys(y.translations).length===0&&y.loadTranslations()}),(r,o)=>(m(),c("div",j,[e("div",z,[e("div",B,[e("h1",D,s(a("users.title")),1),e("button",{onClick:o[0]||(o[0]=t=>{i.value=!0,d.value=null}),class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors"}," + "+s(a("users.add_user")),1)]),i.value?(m(),c("div",L,[e("h3",N,s(d.value?a("users.edit_user"):a("users.new_user")),1),e("div",T,[e("div",null,[e("label",q,s(a("auth.name"))+" * ",1),g(e("input",{"onUpdate:modelValue":o[1]||(o[1]=t=>l.value.name=t),type:"text",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[v,l.value.name]])]),e("div",null,[e("label",I,s(a("auth.email"))+" * ",1),g(e("input",{"onUpdate:modelValue":o[2]||(o[2]=t=>l.value.email=t),type:"email",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[v,l.value.email]])]),e("div",null,[e("label",O,s(a("auth.password"))+" "+s(d.value?"(opzionale)":"*"),1),g(e("input",{"onUpdate:modelValue":o[3]||(o[3]=t=>l.value.password=t),type:"password",class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},null,512),[[v,l.value.password]])]),e("div",null,[e("label",A,s(a("users.role"))+" * ",1),g(e("select",{"onUpdate:modelValue":o[4]||(o[4]=t=>l.value.role=t),class:"w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"},[e("option",G,s(a("users.role_user")),1),e("option",H,s(a("users.role_admin")),1)],512),[[S,l.value.role]])])]),e("div",J,[e("button",{onClick:w,disabled:!l.value.name||!l.value.email||!d.value&&!l.value.password||b.value,class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors"},s(a("common.save")),9,K),e("button",{onClick:h,class:"px-4 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-gray-600 rounded-lg hover:bg-gray-300 transition-colors"},s(a("common.cancel")),1)])])):V("",!0),e("div",P,[e("table",Q,[e("thead",R,[e("tr",null,[e("th",W,s(a("users.name")),1),e("th",X,s(a("users.email")),1),e("th",Y,s(a("users.role")),1),e("th",Z,s(a("common.actions")),1)])]),e("tbody",ee,[(m(!0),c($,null,F(_.value,t=>(m(),c("tr",{key:t.id,class:"hover:bg-gray-50 dark:hover:bg-gray-700"},[e("td",te,s(t.name),1),e("td",ae,s(t.email),1),e("td",se,[e("span",{class:M(["px-2 py-1 text-xs font-medium rounded",t.role==="admin"?"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300":"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-300"])},s(t.role==="admin"?a("users.role_admin"):a("users.role_user")),3)]),e("td",re,[e("div",oe,[e("button",{onClick:u=>f(t),class:"text-blue-600 dark:text-blue-400 hover:text-blue-800 dark:hover:text-blue-300"},s(a("common.edit")),9,le),e("button",{onClick:u=>C(t),class:"text-red-600 dark:text-red-400 hover:text-red-800 dark:hover:text-red-300"},s(a("common.delete")),9,de)])])]))),128))])])])])]))}};export{ue as default};
